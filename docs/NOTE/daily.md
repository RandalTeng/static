日常遇坑记录
==

2019-05-27
--

``` text
今天遇到的一个场景, 用户分组组合
VIP分多级 比如 VIP1 VIP2 VIP3 后缀越大级别越高
VIP分多种 比如 AVip BVip CVip 字典序排序越靠前VIP优先级越高
需要把用户分组出来, 级别和种类, 各种分组
然后按VIP分组, 推送对应的内容
原先按照先获取用户分组, 在查询内容分组
发现后续的坑非常大, 问了一波大佬
大致意思是分组的时候尽量细分, 向上组合得到目标用户结果集, 然后推送结果集内容
自己做的时候可能是分组没有做到原子化, 留了一波坑
希望后续有操作能搞定这波
```

2019-07-15
--

``` text
很早之前的问题, API服务器的监控显示, 很多接口请求, runAction方法执行时间比SQL执行时间长一倍差不多
之前一直找不到原因, 尽量去压缩代码, 今天突然发现, session_start执行时间占了大半
发现session用的默认配置, 就是files存储, 这里记录一下, 以后的session必须使用redis/memcache
反正就是不能直接使用file存储, 文件读取耗时太长了
```
