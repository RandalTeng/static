Cache
==

缓存雪崩
--

``` text
现象: 在某个时间点, 大量缓存同时失效  
1. 一般处理为随机设置键失效时间  
2. 对于热点数据可以采用不设置失效时间的方案, 后台做一定逻辑去手动刷新缓存  
第二种方法对数据会有一定延时, 但是一般网站可以接受一定程度的延时
```

缓存击穿
--

``` text
某个时间点, 某个热点缓存失效, 大量请求直达数据库  
1. 采用二级缓存, 缓存失效时间略大于(请求二级缓存后, 设置较小的失效时间, 同时异步刷  
   新二级缓存时间)  
2. 设置资源锁, 单线程访问指定数据, 其他线程等待获取完成后读取缓存(需要做请求等待)  
执行第一步完成后开启一个刷新二级缓存的消息
```

缓存穿透
--

``` text
现象: 恶意用户高频率请求空数据键, 导致高频请求数据库查询空数据  
1. 缓存空结果键, 设置小过期时间  
2. 设置请求过滤器, 过滤恶意请求, 请求限制级别等  
3. 设置缓存过滤器, 固定为空结果的键直接返回空值, 不做任何处理  
一般直接做第一个处理就行, 后面两个实用性不是很大
```

关于SESSION
--

!!! 千万注意, SESSION在PROD环境必须设置为REDIS/MEMCACHE存储, 不然你的每个请求可能要多执行100%的时间
